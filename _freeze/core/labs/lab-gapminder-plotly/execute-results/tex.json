{
  "hash": "3dfd147f674a296ab6aaf6988b690d4f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data visualization  with plotly, using a coding assistant\"\ncategories: [Visualization, Rosling, gapminder, ggplot2, plotly, Grammar of Graphics, Coding assistant]\ndate: \"2026-01-31 22:32:43.499112\"\n\nformat:\n  html:\n    output-file: lab-gapminder-plotly.html\n  pdf:\n    include-in-header: \n      - file: macros.tex\n    output-file: lab-gapminder-plotly.pdf\n\nexecute: \n  eval: true\n  echo: true\n  collapse: true\n\n\n\n---\n\n\n\n::: {layout=\"[80,20]\"}\n\n::: {#first-column}\n\n|                            |\n|:---------------------------|\n| {{< var curriculum >}}     |\n| {{< var university >}}     |\n| Ann√©e {{< var year >}}     |\n| {{< var homepage >}}       |\n| {{< var moodle >}}         |\n\n\n::: \n\n::: {#second-column}\n![](/images/UniversiteParis_monogramme_couleur_RVB.png){align=\"right\" style=\"size:50px;\" width=75}\n:::\n\n:::\n\n\n\n\n## Objectives\n\n\n\n## Prompts (first draft)\n\n::: {.callout-important title=\"Prompt\"}\n\nLoad the gapminder package\n\n:::\n\n::: {.callout-note title=\"Answer\"}\n\nAdding a code chunk to load the gapminder package after the preamble.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gapminder)\nlibrary(plotly)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: ggplot2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'plotly'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:stats':\n\n    filter\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:graphics':\n\n    layout\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n:::\n\n\nAdded a code chunk to load the gapminder package. It appears after the preamble include and will load the library when the document is rendered. The chunk is configured to echo the code and evaluate it.\n\n:::\n\n\n::: {.callout-important title=\"Prompt\"}\n\nUsing package plotly, build an animated  plot (each frame corresponding to a value in colum Year) mapping column gdpPercap to X-axis and lifeExpectancy to Y-axis \n\n:::\n\n\n::: {.callout-note title=\"Answer\"}\n \n Creating an animated plotly plot. Checking the current file and the gapminder dataset structure.\n\n Adding plotly and creating the animated plot \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create animated plotly visualization\n# X-axis: gdpPercap, Y-axis: lifeExp, Frame: year\n(gapminder |>\n  ggplot() +\n  aes(\n    x = gdpPercap, \n    y = lifeExp, \n    frame = year, \n    color = continent, \n    size = pop, \n    text = country) +\n  geom_point(alpha = 0.6) +\n  scale_x_log10() +\n  scale_size_area(\n    max_size = 15,\n    labels = scales::label_number(scale = 1/1e6, suffix = \" M\"),\n    guide = guide_legend(title = \"Population\")\n  ) +\n  guides(color = \"none\") +\n  labs(\n    x = \"GDP per Capita\",\n    y = \"Life Expectancy\",\n    title = \"Gapminder: Life Expectancy vs GDP per Capita (Animated)\"\n  )) |>\n  ggplotly(height = 500, width = 750)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nPhantomJS not found. You can install it with webshot::install_phantomjs(). If it is installed, please make sure the phantomjs executable can be found via the PATH variable.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nfile:////tmp/RtmpapvMYU/file2165a2f25758d/widget2165a53755c19.html screenshot completed\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](lab-gapminder-plotly_files/figure-pdf/animated-plot-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nAdded an animated plotly visualization:\n\nLoads required packages: plotly and ggplot2 (in addition to gapminder)\n\nCreates the animated plot with:\n\n- X-axis: gdpPercap (GDP per capita)\n- Y-axis: lifeExp (Life expectancy)\n- Frame: year (enables animation by year)\n- Log scale on the x-axis (common for GDP)\n\nLabels and title\n\nThe `frame = year` aesthetic in the `aes()` call makes `plotly` animate by year. When rendered, you'll see a play button to animate through the years, showing how countries move across the GDP per capita vs. life expectancy space over time.\n\n\n:::\n\n## Second thoughts \n\n- Metadata (FAIRness)\n- Commenting \n  - Spelling out the message\n  - Data criticism \n  - Improving accessibility\n  - Information released after hovering\n- Navigating the plot\n  - Using `plotly`\n  - The case for interactive dashboards\n    - `shiny`\n    - `dash`\n \n\n\n## Accessing gapminder metadata\n\n\n::: {.callout-important title=\"Prompt\"}\n\nWhere can I find metadata concerning the gapminder dataset?\n\n:::\n\n::: {.callout-note title=\"Answer\"}\n\n\nMetadata about the `gapminder` dataset can be found in several places:\n\n### 1. Package documentation\n\nThe most direct way to access metadata is through R's help system:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View the dataset documentation\n?gapminder\n\n# Or equivalently\n# help(gapminder)\n```\n:::\n\n\n### 2. Package vignettes\n\nThe `gapminder` package may include vignettes with detailed information:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# List available vignettes\nbrowseVignettes(\"gapminder\")\n\n# Or view a specific vignette\nvignette(\"gapminder\", package = \"gapminder\")\n```\n:::\n\n\n### 3. Dataset structure and attributes\n\nYou can inspect the dataset structure and any stored metadata:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View dataset structure\nstr(gapminder)\n# View attributes (may contain metadata)\nattributes(gapminder)\n# Quick overview\ntibble::glimpse(gapminder)\n```\n:::\n\n\n### 4. Online resources\n\n- **CRAN package page**: <https://cran.r-project.org/package=gapminder>\n- **GitHub repository**: <https://github.com/jennybc/gapminder>\n- **Original data source**: The data is based on statistics from the [Gapminder Foundation](https://www.gapminder.org/)\n\n### 5. Package description\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get package information\npackageDescription(\"gapminder\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPackage: gapminder\nTitle: Data from Gapminder\nVersion: 1.0.0\nAuthors@R: person(\"Jennifer\", \"Bryan\", , \"jenny@posit.co\", role =\n        c(\"aut\", \"cre\"), comment = c(ORCID = \"0000-0002-6983-2759\"))\nDescription: An excerpt of the data available at Gapminder.org. For\n        each of 142 countries, the package provides values for life\n        expectancy, GDP per capita, and population, every five years,\n        from 1952 to 2007.\nLicense: CC0\nURL: https://github.com/jennybc/gapminder,\n        https://www.gapminder.org/data/,\n        https://doi.org/10.5281/zenodo.594018,\n        https://jennybc.github.io/gapminder/\nBugReports: https://github.com/jennybc/gapminder/issues\nDepends: R (>= 3.1.0)\nImports: tibble\nSuggests: dplyr, ggplot2, knitr, rmarkdown, testthat (>= 3.0.0)\nEncoding: UTF-8\nLazyData: true\nRoxygenNote: 7.2.3\nConfig/testthat/edition: 3\nVignetteBuilder: knitr\nNeedsCompilation: no\nPackaged: 2023-03-09 18:35:33 UTC; jenny\nAuthor: Jennifer Bryan [aut, cre]\n        (<https://orcid.org/0000-0002-6983-2759>)\nMaintainer: Jennifer Bryan <jenny@posit.co>\nRepository: CRAN\nDate/Publication: 2023-03-10 09:50:08 UTC\nBuilt: R 4.4.0; ; 2024-05-30 14:53:13 UTC; unix\nRemoteType: standard\nRemotePkgRef: gapminder\nRemoteRef: gapminder\nRemoteRepos: https://cloud.r-project.org\nRemotePkgPlatform: source\nRemoteSha: 1.0.0\n\n-- File: /home/boucheron/R/x86_64-pc-linux-gnu-library/4.4/gapminder/Meta/package.rds \n```\n\n\n:::\n\n```{.r .cell-code}\n# Get package citation\ncitation(\"gapminder\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTo cite package 'gapminder' in publications use:\n\n  Bryan J (2023). _gapminder: Data from Gapminder_. R package version\n  1.0.0, <https://CRAN.R-project.org/package=gapminder>.\n\nA BibTeX entry for LaTeX users is\n\n  @Manual{,\n    title = {gapminder: Data from Gapminder},\n    author = {Jennifer Bryan},\n    year = {2023},\n    note = {R package version 1.0.0},\n    url = {https://CRAN.R-project.org/package=gapminder},\n  }\n```\n\n\n:::\n:::\n\n\n:::\n \nThis answer is mildly satisfactory. \nBut what are we expecting concerning metadata?\n\n- Data sources\n- Data quality\n- Data \n\n[Gapminder documentation](https://www.gapminder.org/data/documentation/)\n\n[The Gapminder foundation](https://www.gapminder.org)\n\nA beautiful animation is offered on the Gapminder  foundation website. A warning concerning data quality is available.\n\nSee [Blog post on this issue](https://www.gapminder.org/news/data-sources-dont-panic-end-poverty/)\n\n\n[Life Expectancy at Birth Gapminder data](https://www.gapminder.org/data/documentation/gd004/)\n\n\n[SDMX]()\n\n[DDF Model](https://open-numbers.github.io/ddf.html)\n\n[DDFQL]()\n\n### Knowledge graphs\n\n\n## Playing with the palette\n\n\n##\n\n\n## The case for interactive dashboards\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}